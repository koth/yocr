package(default_visibility = ["//visibility:public"])


cc_library(name="tess-ccutil",
	srcs=[
	"config_auto.h",
	"ccutil/ambigs.cpp",
	"ccutil/basedir.cpp",
	"ccutil/bits16.cpp",
	"ccutil/bitvector.cpp",
	"ccutil/ccutil.cpp",
	"ccutil/clst.cpp",
	"ccutil/elst2.cpp",
	"ccutil/elst.cpp",
	"ccutil/errcode.cpp",
	"ccutil/globaloc.cpp",
	"ccutil/indexmapbidi.cpp",
	"ccutil/mainblk.cpp",
	"ccutil/memry.cpp",
	"ccutil/params.cpp",
	"ccutil/scanutils.cpp",
	"ccutil/serialis.cpp",
	"ccutil/strngs.cpp",
	"ccutil/tessdatamanager.cpp",
	"ccutil/tprintf.cpp",
	"ccutil/unicharmap.cpp",
	"ccutil/unichar.cpp",
	"ccutil/unicharset.cpp",
	"ccutil/unicodes.cpp",
	"ccutil/universalambigs.cpp",
	]+glob(["ccutil/*.h"]),
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    includes=[
    ".",
    ],
    deps=[
	'//thirdparty/leptonica:leptonica',
    ],
    linkstatic=1,
	)

cc_library(name="tess-cutil",
	srcs=[
	"cutil/bitvec.cpp",
	"cutil/callcpp.cpp",
	"cutil/cutil_class.cpp",
	"cutil/cutil.cpp",
	"cutil/danerror.cpp",
	"cutil/efio.cpp",
	"cutil/emalloc.cpp",
	"cutil/freelist.cpp",
	"cutil/listio.cpp",
	"cutil/oldlist.cpp",
	"cutil/structures.cpp",
	]+glob(["cutil/*.h"]),
    deps=[
	':tess-ccutil',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H','__UNIX__',
    ],
    includes=[
    '.',
    'ccutil',
    'viewer'
    ],
    linkstatic=1,
	)



cc_library(name="tess-viewer",
	srcs=[
	"viewer/scrollview.cpp",
	"viewer/svmnode.cpp",
	"viewer/svpaint.cpp",
	"viewer/svutil.cpp",
	]+glob(["viewer/*.h"]),

    includes=[
    '.',
    'ccutil',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    deps=[
    ':tess-ccutil',
    ],
    linkstatic=1,
	)


cc_library(name="tess-ccstruct",
	srcs=[
	"ccstruct/blamer.cpp",
	"ccstruct/blobbox.cpp",
	"ccstruct/blobs.cpp",
	"ccstruct/blread.cpp",
	"ccstruct/boxread.cpp",
	"ccstruct/boxword.cpp",
	"ccstruct/ccstruct.cpp",
	"ccstruct/coutln.cpp",
	"ccstruct/detlinefit.cpp",
	"ccstruct/dppoint.cpp",
	"ccstruct/fontinfo.cpp",
	"ccstruct/genblob.cpp",
	"ccstruct/linlsq.cpp",
	"ccstruct/matrix.cpp",
	"ccstruct/mod128.cpp",
	"ccstruct/normalis.cpp",
	"ccstruct/ocrblock.cpp",
	"ccstruct/ocrpara.cpp",
	"ccstruct/ocrrow.cpp",
	"ccstruct/otsuthr.cpp",
	"ccstruct/pageres.cpp",
	"ccstruct/params_training_featdef.cpp",
	"ccstruct/pdblock.cpp",
	"ccstruct/points.cpp",
	"ccstruct/polyaprx.cpp",
	"ccstruct/polyblk.cpp",
	"ccstruct/publictypes.cpp",
	"ccstruct/quadlsq.cpp",
	"ccstruct/quspline.cpp",
	"ccstruct/ratngs.cpp",
	"ccstruct/rect.cpp",
	"ccstruct/rejctmap.cpp",
	"ccstruct/seam.cpp",
	"ccstruct/split.cpp",
	"ccstruct/statistc.cpp",
	"ccstruct/stepblob.cpp",
	"ccstruct/vecfuncs.cpp",
	"ccstruct/werd.cpp",
	]+glob(["ccstruct/*.h"]),
    deps=[
    ':tess-ccutil',
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    linkstatic=1,
	)


cc_library(name="tess-classify",
	srcs=[
	"classify/adaptive.cpp",
	"classify/adaptmatch.cpp",
	"classify/blobclass.cpp",
	"classify/classify.cpp",
	"classify/cluster.cpp",
	"classify/clusttool.cpp",
	"classify/cutoffs.cpp",
	"classify/errorcounter.cpp",
	"classify/extract.cpp",
	"classify/featdefs.cpp",
	"classify/flexfx.cpp",
	"classify/float2int.cpp",
	"classify/fpoint.cpp",
	"classify/fxdefs.cpp",
	"classify/intfeaturedist.cpp",
	"classify/intfeaturemap.cpp",
	"classify/intfeaturespace.cpp",
	"classify/intfx.cpp",
	"classify/intmatcher.cpp",
	"classify/intproto.cpp",
	"classify/kdtree.cpp",
	"classify/mastertrainer.cpp",
	"classify/mfdefs.cpp",
	"classify/mfoutline.cpp",
	"classify/mf.cpp",
	"classify/mfx.cpp",
	"classify/normfeat.cpp",
	"classify/normmatch.cpp",
	"classify/ocrfeatures.cpp",
	"classify/outfeat.cpp",
	"classify/picofeat.cpp",
	"classify/protos.cpp",
	"classify/sampleiterator.cpp",
	"classify/shapeclassifier.cpp",
	"classify/shapetable.cpp",
	"classify/tessclassifier.cpp",
	"classify/trainingsample.cpp",
	"classify/trainingsampleset.cpp",
	"classify/xform2d.cpp",
	],
    deps=[
    ':tess-ccutil',
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    linkstatic=1,

	)


cc_library(name="tess-cube",
	srcs=[
	"cube/altlist.cpp",
	"cube/beam_search.cpp",
	"cube/bmp_8.cpp",
	"cube/cached_file.cpp",
	"cube/char_altlist.cpp",
	"cube/char_bigrams.cpp",
	"cube/char_samp_enum.cpp",
	"cube/char_samp.cpp",
	"cube/char_samp_set.cpp",
	"cube/char_set.cpp",
	"cube/classifier_factory.cpp",
	"cube/con_comp.cpp",
	"cube/conv_net_classifier.cpp",
	"cube/cube_line_object.cpp",
	"cube/cube_line_segmenter.cpp",
	"cube/cube_object.cpp",
	"cube/cube_search_object.cpp",
	"cube/cube_tuning_params.cpp",
	"cube/cube_utils.cpp",
	"cube/feature_bmp.cpp",
	"cube/feature_chebyshev.cpp",
	"cube/feature_hybrid.cpp",
	"cube/hybrid_neural_net_classifier.cpp",
	"cube/search_column.cpp",
	"cube/search_node.cpp",
	"cube/tess_lang_mod_edge.cpp",
	"cube/tess_lang_model.cpp",
	"cube/word_altlist.cpp",
	"cube/word_list_lang_model.cpp",
	"cube/word_size_model.cpp",
	"cube/word_unigrams.cpp",
	]+glob(["cube/*.h"]),

    includes=[
    '.',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE',
    ],
    deps=[
    ':tess-ccutil',
    ],
    linkstatic=1,
	)



cc_library(name="tess-dict",
	srcs=[
	"dict/context.cpp",
	"dict/dawg_cache.cpp",
	"dict/dawg.cpp",
	"dict/dict.cpp",
	"dict/hyphen.cpp",
	"dict/permdawg.cpp",
	"dict/stopper.cpp",
	"dict/trie.cpp",
	]+glob(["dict/*.h"]),
    deps=[
    ':tess-ccutil'
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    linkstatic=1,

	)

cc_library(name="tess-neuralnetwork",
	srcs=[
	"neural_networks/runtime/input_file_buffer.cpp",
	"neural_networks/runtime/neural_net.cpp",
	"neural_networks/runtime/neuron.cpp",
	"neural_networks/runtime/sigmoid_table.cpp",
	]+glob(["neural_networks/runtime/*.h"]),
    deps=[
    ],
   
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    linkstatic=1,

	)

cc_library(name="tess-opencl",
	srcs=[
	"opencl/openclwrapper.cpp",
	]+glob(["opencl/*.h"]),
    includes=[
    '.',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    deps=[
    ':tess-ccutil'
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H','__UNIX__',
    ],
    linkstatic=1,

	)


cc_library(name="tess-textord",
	srcs=[
	"textord/alignedblob.cpp",
	"textord/baselinedetect.cpp",
	"textord/bbgrid.cpp",
	"textord/blkocc.cpp",
	"textord/blobgrid.cpp",
	"textord/ccnontextdetect.cpp",
	"textord/cjkpitch.cpp",
	"textord/colfind.cpp",
	"textord/colpartitiongrid.cpp",
	"textord/colpartition.cpp",
	"textord/colpartitionset.cpp",
	"textord/devanagari_processing.cpp",
	"textord/drawedg.cpp",
	"textord/drawtord.cpp",
	"textord/edgblob.cpp",
	"textord/edgloop.cpp",
	"textord/equationdetectbase.cpp",
	"textord/fpchop.cpp",
	"textord/gap_map.cpp",
	"textord/imagefind.cpp",
	"textord/linefind.cpp",
	"textord/makerow.cpp",
	"textord/oldbasel.cpp",
	"textord/pithsync.cpp",
	"textord/pitsync1.cpp",
	"textord/scanedg.cpp",
	"textord/sortflts.cpp",
	"textord/strokewidth.cpp",
	"textord/tabfind.cpp",
	"textord/tablefind.cpp",
	"textord/tablerecog.cpp",
	"textord/tabvector.cpp",
	"textord/textlineprojection.cpp",
	"textord/textord.cpp",
	"textord/topitch.cpp",
	"textord/tordmain.cpp",
	"textord/tospace.cpp",
	"textord/tovars.cpp",
	"textord/underlin.cpp",
	"textord/wordseg.cpp",
	"textord/workingpartset.cpp",
	]+glob(["textord/*.h"]),
    deps=[
    ':tess-ccutil',
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    linkstatic=1,

	)

cc_library(name="tess-wordrec",
	srcs=[
	"wordrec/associate.cpp",
	"wordrec/chopper.cpp",
	"wordrec/chop.cpp",
	"wordrec/drawfx.cpp",
	"wordrec/findseam.cpp",
	"wordrec/gradechop.cpp",
	"wordrec/language_model.cpp",
	"wordrec/lm_consistency.cpp",
	"wordrec/lm_pain_points.cpp",
	"wordrec/lm_state.cpp",
	"wordrec/makechop.cpp",
	"wordrec/olutil.cpp",
	"wordrec/outlines.cpp",
	"wordrec/params_model.cpp",
	"wordrec/pieces.cpp",
	"wordrec/plotedges.cpp",
	"wordrec/render.cpp",
	"wordrec/segsearch.cpp",
	"wordrec/tface.cpp",
	"wordrec/wordclass.cpp",
	"wordrec/wordrec.cpp",
	]+glob(["wordrec/*.h"]),
    deps=[
    ':tess-ccutil'
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    linkstatic=1,
	)



cc_library(name="tess-ccmain",
	srcs=[
	"ccmain/adaptions.cpp",
	"ccmain/applybox.cpp",
	"ccmain/control.cpp",
	"ccmain/cubeclassifier.cpp",
	"ccmain/cube_control.cpp",
	"ccmain/cube_reco_context.cpp",
	"ccmain/docqual.cpp",
	"ccmain/equationdetect.cpp",
	"ccmain/fixspace.cpp",
	"ccmain/fixxht.cpp",
	"ccmain/ltrresultiterator.cpp",
	"ccmain/osdetect.cpp",
	"ccmain/output.cpp",
	"ccmain/pageiterator.cpp",
	"ccmain/pagesegmain.cpp",
	"ccmain/pagewalk.cpp",
	"ccmain/paragraphs.cpp",
	"ccmain/paramsd.cpp",
	"ccmain/par_control.cpp",
	"ccmain/pgedit.cpp",
	"ccmain/recogtraining.cpp",
	"ccmain/reject.cpp",
	"ccmain/resultiterator.cpp",
	"ccmain/superscript.cpp",
	"ccmain/tessbox.cpp",
	"ccmain/tessedit.cpp",
	"ccmain/tesseractclass.cpp",
	"ccmain/tesseract_cube_combiner.cpp",
	"ccmain/tessvars.cpp",
	"ccmain/tfacepp.cpp",
	"ccmain/thresholder.cpp",
	"ccmain/werdit.cpp",
	],
    deps=[
    ':tess-ccutil',
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H',
    ],
    linkstatic=1,


	)



cc_library(name="tess-api",
	srcs=[
	"api/baseapi.cpp",
	"api/capi.cpp",
	"api/pdfrenderer.cpp",
	"api/renderer.cpp",
	]+glob(['api/*.h']),
    deps=[
    ':tess-ccmain',
     ':tess-cube',
     ':tess-neuralnetwork',
    ':tess-textord',
    ':tess-wordrec',
    ':tess-classify',
    ':tess-dict',
    ':tess-ccstruct',
    ':tess-cutil',
    ':tess-viewer',
    ':tess-ccutil',
    ':tess-opencl',
    '@jpeg_archive//:jpeg',
    '@png_archive//:png',
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
	'./dict',
	'./ccmain',
	'./classify',
	 './textord',
     './wordrec',
	'./neural_networks/runtime',
	'./viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H','__UNIX__',
    ],
    linkstatic=1,
	)

cc_binary(name="tesseract_main",
    srcs=[
    "api/tesseractmain.cpp",
    ],
    deps=[
    ':tess-api',
    ],
    linkopts=[
    '-pthread',
    ],
    includes=[
    '.',
    './opencl',
    './cube',
    './ccutil',
    './cutil',
    './ccstruct',
    './dict',
    './ccmain',
    './classify',
     './textord',
     './wordrec',
    './neural_networks/runtime',
    './viewer',
    ],
    defines=[
    'USE_STD_NAMESPACE','HAVE_CONFIG_H','__UNIX__',
    ],
    linkstatic=1,
    )

